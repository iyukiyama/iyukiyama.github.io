<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Maven学习实战 | yukiyama</title><meta name="author" content="yukiyama,iyukiyama@outlook.com"><meta name="copyright" content="yukiyama"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="全面学习 Maven 的使用。">
<meta property="og:type" content="article">
<meta property="og:title" content="Maven学习实战">
<meta property="og:url" content="https://iyukiyama.github.io/maven-in-action/index.html">
<meta property="og:site_name" content="yukiyama">
<meta property="og:description" content="全面学习 Maven 的使用。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/maven-bg.png">
<meta property="article:published_time" content="2022-08-31T13:35:23.475Z">
<meta property="article:modified_time" content="2022-11-18T10:01:42.168Z">
<meta property="article:author" content="yukiyama">
<meta property="article:tag" content="Maven">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/maven-bg.png"><link rel="shortcut icon" href="https://raw.githubusercontent.com/iyukiyama/pics/f64481f5339a9a86561027eda41a81aaf1c3a92b/hexo-iyukiyama/site_img/favicon.svg"><link rel="canonical" href="https://iyukiyama.github.io/maven-in-action/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="8txPepZr-K8-G42klmRZPinO36bw-JYKtqBKyT6YLow"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: yukiyama","link":"链接: ","source":"来源: yukiyama","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Maven学习实战',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-18 18:01:42'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chart-simple"></i><span> 算法</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/binary-search/"><span> 二分查找</span></a></li><li><a class="site-page child" href="/sorting/"><span> 十大排序</span></a></li><li><a class="site-page child" href="/union-find/"><span> 并查集</span></a></li><li><a class="site-page child" href="/graph/"><span> 图论算法</span></a></li><li><a class="site-page child" href="/binary-search-tree/"><span> 二叉查找树</span></a></li><li><a class="site-page child" href="/avl-tree/"><span> AVL树</span></a></li><li><a class="site-page child" href="/splay-tree/"><span> splay树</span></a></li><li><a class="site-page child" href="/binary-indexed-tree/"><span> 树状数组</span></a></li><li><a class="site-page child" href="/segment-tree/"><span> 线段树</span></a></li><li><a class="site-page child" href="/red-black-tree/"><span> 红黑树</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-diagram-project"></i><span> 图论证明</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/dijkstra-proof/"><span> Dijkstra</span></a></li><li><a class="site-page child" href="/prim-proof/"><span> Prim</span></a></li><li><a class="site-page child" href="/bellman-ford-spfa-proof/"><span> Bellman-Ford &amp; SPFA</span></a></li><li><a class="site-page child" href="/floyd-warshall-proof/"><span> Floyd-Warshall</span></a></li><li><a class="site-page child" href="/max-flow-min-cut-proof/"><span> 最大流最小割定理</span></a></li><li><a class="site-page child" href="/edmonds-karp-complexity-proof/"><span> Edmonds-Karp</span></a></li><li><a class="site-page child" href="/dinic-complexity-proof/"><span> Dinic</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="https://iyukiyama.github.io/docsify-leetcode/"><i class="fa-fw fas fa-code"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-mug-saucer"></i><span> Java</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/jdbc-in-action/"><span> JDBC</span></a></li><li><a class="site-page child" href="/javaweb-in-action/"><span> Java Web</span></a></li><li><a class="site-page child" href="/spring5-framework-in-action/"><span> Spring Framework</span></a></li><li><a class="site-page child" href="/springmvc-in-action/"><span> SpringMVC</span></a></li><li><a class="site-page child" href="/springboot-in-action/"><span> SpringBoot</span></a></li><li><a class="site-page child" href="/lombok-in-action/"><span> Lombok</span></a></li><li><a class="site-page child" href="/concurrency-in-action/"><span> Concurrency</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://iyukiyama.gitbook.io/design-pattern/"><i class="fa-fw fas fa-palette"></i><span> 设计模式</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-database"></i><span> Database</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/mysql-in-action/"><span> MySQL</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-screwdriver-wrench"></i><span> Tools</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/git-in-action/"><span> Git</span></a></li><li><a class="site-page child" href="/maven-in-action/"><span> Maven</span></a></li><li><a class="site-page child" href="/docsify-in-action/"><span> docsify</span></a></li><li><a class="site-page child" href="/intellij-idea/"><span> IntelliJ Idea</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-circle-info"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/maven-bg.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">yukiyama</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-chart-simple"></i><span> 算法</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/binary-search/"><span> 二分查找</span></a></li><li><a class="site-page child" href="/sorting/"><span> 十大排序</span></a></li><li><a class="site-page child" href="/union-find/"><span> 并查集</span></a></li><li><a class="site-page child" href="/graph/"><span> 图论算法</span></a></li><li><a class="site-page child" href="/binary-search-tree/"><span> 二叉查找树</span></a></li><li><a class="site-page child" href="/avl-tree/"><span> AVL树</span></a></li><li><a class="site-page child" href="/splay-tree/"><span> splay树</span></a></li><li><a class="site-page child" href="/binary-indexed-tree/"><span> 树状数组</span></a></li><li><a class="site-page child" href="/segment-tree/"><span> 线段树</span></a></li><li><a class="site-page child" href="/red-black-tree/"><span> 红黑树</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-diagram-project"></i><span> 图论证明</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/dijkstra-proof/"><span> Dijkstra</span></a></li><li><a class="site-page child" href="/prim-proof/"><span> Prim</span></a></li><li><a class="site-page child" href="/bellman-ford-spfa-proof/"><span> Bellman-Ford &amp; SPFA</span></a></li><li><a class="site-page child" href="/floyd-warshall-proof/"><span> Floyd-Warshall</span></a></li><li><a class="site-page child" href="/max-flow-min-cut-proof/"><span> 最大流最小割定理</span></a></li><li><a class="site-page child" href="/edmonds-karp-complexity-proof/"><span> Edmonds-Karp</span></a></li><li><a class="site-page child" href="/dinic-complexity-proof/"><span> Dinic</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="https://iyukiyama.github.io/docsify-leetcode/"><i class="fa-fw fas fa-code"></i><span> LeetCode</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-mug-saucer"></i><span> Java</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/jdbc-in-action/"><span> JDBC</span></a></li><li><a class="site-page child" href="/javaweb-in-action/"><span> Java Web</span></a></li><li><a class="site-page child" href="/spring5-framework-in-action/"><span> Spring Framework</span></a></li><li><a class="site-page child" href="/springmvc-in-action/"><span> SpringMVC</span></a></li><li><a class="site-page child" href="/springboot-in-action/"><span> SpringBoot</span></a></li><li><a class="site-page child" href="/lombok-in-action/"><span> Lombok</span></a></li><li><a class="site-page child" href="/concurrency-in-action/"><span> Concurrency</span></a></li></ul></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://iyukiyama.gitbook.io/design-pattern/"><i class="fa-fw fas fa-palette"></i><span> 设计模式</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-database"></i><span> Database</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/mysql-in-action/"><span> MySQL</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-screwdriver-wrench"></i><span> Tools</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/git-in-action/"><span> Git</span></a></li><li><a class="site-page child" href="/maven-in-action/"><span> Maven</span></a></li><li><a class="site-page child" href="/docsify-in-action/"><span> docsify</span></a></li><li><a class="site-page child" href="/intellij-idea/"><span> IntelliJ Idea</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-circle-info"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Maven学习实战</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-31T13:35:23.475Z" title="发表于 2022-08-31 21:35:23">2022-08-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-18T10:01:42.168Z" title="更新于 2022-11-18 18:01:42">2022-11-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">13.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>68分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Maven学习实战"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1>Maven学习实战_yukiyama</h1>
<blockquote>
<p>本文总结自 <a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV12q4y147e4/?spm_id_from=333.999.0.0">尚硅谷2022版Maven教程（maven入门+高深，全网无出其右！）</a> 。</p>
<p>操作环境为 macOS Monterey 12.6 / apache-maven-3.8.5 / IntelliJ IDEA 2022.2.1 (Ultimate Edition) 。</p>
</blockquote>
<br />
<h2 id="Maven简述">Maven简述</h2>
<p><a target="_blank" rel="noopener" href="https://maven.apache.org/">Maven</a> 是 Apache 基金会维护的针对 <strong>Java 项目构建和依赖管理的工具</strong>，用于定义项目结构、管理项目依赖并提供一套标准的项目构建流程。</p>
<ul>
<li><strong>Maven 作为依赖管理工具</strong>。通过引入「依赖」可自动从该依赖的官方网站上下载规范的相关 Jar 包，并管理规模巨大的 jar 包及它们之间的依赖关系。</li>
<li><strong>Maven 作为构建管理工具</strong>。脱离 IDE 环境时可利用 Maven 进行构建。</li>
</ul>
<br />
<h3 id="坐标">坐标</h3>
<p>Maven 项目使用 <code>pom.xml</code> 文件来管理依赖。该文件中的 <code>&lt;dependencies&gt;</code> 标签中，每一个 <code>&lt;dependency&gt;</code> 都通过三个向量来完成依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-clean-plugin --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>这三个向量唯一确定一个 jar 包。</p>
<table>
<thead>
<tr>
<th>向量</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>groupId</td>
<td>公司或组织的项目 ID，例如 <code>org.apache.maven.plugins</code></td>
</tr>
<tr>
<td>artifactId</td>
<td>项目或项目中的模块，例如<code>maven-clean-plugin</code></td>
</tr>
<tr>
<td>version</td>
<td>版本号，例如 <code>2.5</code>, <code>1.0-SNAPSHOT</code>, <code>2.0-RELEASE</code> 等。<br /><code>SNAPSHOT</code> 为快照版本，即还在开发迭代中的不稳定版本。<br /><code>RELEASE</code> 为正式版本。</td>
</tr>
</tbody>
</table>
<p>根据该依赖，如下文件会自动下载到本地仓库 (本演示为 <code>repo</code> ) 中的如下目录中。可以看到，路径实际上是由 <code>groupId</code>, <code>artifactId</code> 和 <code>version</code> 组成的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/Users/yukiyama/maven/repo/org/apache/maven/plugins/maven-clean-plugin/2.5</span><br><span class="line"></span><br><span class="line">_remote.repositories</span><br><span class="line">maven-clean-plugin-2.5.jar</span><br><span class="line">maven-clean-plugin-2.5.jar.sha1</span><br><span class="line">maven-clean-plugin-2.5.pom</span><br><span class="line">maven-clean-plugin-2.5.pom.sha1</span><br></pre></td></tr></table></figure>
<br />
<h3 id="POM">POM</h3>
<p>POM (Project Object Model) ，即 <strong>「项目对象模型」</strong> 。可与之类比的是 XML 文档中的 DOM 的概念 (Document Object Model) ，文档对象模型。POM 将项目抽象为模型体现在项目的 <code>pom.xml</code> 文件中。常用的 pom 标签会在后文中陆续介绍。</p>
<br />
<h3 id="目录结构">目录结构</h3>
<p>Maven 项目的目录结构是约定好的，约定目录的目的是尽可能 <strong>自动化完成项目构建</strong> 。例如 Maven 执行编译操作，要先去 Java 源程序目录读取 Java 源代码，然后执行编译，之后将编译结果存放在 target 目录中等等。不同的 Maven 项目的约定的目录结构不同，在后续分别创建「Maven Java 项目」和 「Maven Web 项目」时将分别展示二者的目录结构。</p>
<p>当前开发领域的技术发展趋势：<strong>约定大于配置，配置大于编码</strong>。</p>
<br />
<h2 id="安装及配置">安装及配置</h2>
<h3 id="安装Maven">安装Maven</h3>
<h4 id="Mac">Mac</h4>
<ol>
<li>
<p>在 <a target="_blank" rel="noopener" href="https://maven.apache.org/download.cgi">Maven 官网</a>下载所需版本的 Maven 压缩包。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apache-maven-3.8.6-bin.tar.gz</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>将压缩包解压后置于一个无特殊字符 (如中文字符) 的路径下。</p>
</li>
<li>
<p>在终端中通过 <code>vim ~/.bash_profile</code> 命令编辑配置文件 <code>.bash_profile</code> ，向其中 PATH 中添加 Maven 的路径信息，如下 (Java 已事先安装好并配置到环境变量中了)。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home</span><br><span class="line">export M2_HOME=/Users/yukiyama/apache-maven-3.8.5/</span><br><span class="line"></span><br><span class="line">export PATH=$&#123;PATH&#125;:$&#123;JAVA_HOME&#125;/bin:$&#123;M2_HOME&#125;/bin</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>保存并退出后，在终端中执行 <code>source .bash_profile</code> 使新配置生效。</p>
</li>
<li>
<p>在终端中执行 <code>echo $M2_HOME</code> ，应返回 Maven 的路径信息。另外，还可执行 <code>mvn --version</code> ，若安装成功，则返回已安装的 Maven 的版本信息。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama ~ % echo $M2_HOME</span><br><span class="line">/Users/yukiyama/apache-maven-3.8.5/</span><br><span class="line">yukiyama@yukiyama ~ % mvn --version</span><br><span class="line">Apache Maven 3.8.5 (3599d3414f046de2324203b78ddcf9b5e4388aa0)</span><br><span class="line">Maven home: /Users/yukiyama/apache-maven-3.8.5</span><br><span class="line">Java version: 16.0.1, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home</span><br><span class="line">Default locale: zh_JP_#Hans, platform encoding: UTF-8</span><br><span class="line">OS name: &quot;mac os x&quot;, version: &quot;11.5&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;</span><br><span class="line">yukiyama@yukiyama ~ %</span><br></pre></td></tr></table></figure>
</li>
</ol>
<br />
<h3 id="配置Maven">配置Maven</h3>
<p>maven 的配置文件在 maven 安装目录下  (apache-maven-x.x.x) 的 <code>conf</code> 文件夹中，文件名为 <code>settings.xml</code> 。常用配置如下。</p>
<table>
<thead>
<tr>
<th>标签</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&lt;localRepository&gt;</code></td>
<td>本地仓库路径</td>
</tr>
<tr>
<td><code>&lt;mirrors&gt;</code></td>
<td>镜像仓库</td>
</tr>
</tbody>
</table>
<p><strong>指定本地仓库路径</strong></p>
<p><code>settings.xml</code> 中搜索 <code>&lt;localRepository&gt;</code> 标签，设置本地仓库路径。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/Users/yukiyama/maven/repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>添加镜像仓库</strong></p>
<p>搜索 <code>&lt;mirrors&gt;</code> 标签，注释掉现有的 <code>&lt;mirror&gt;</code> 标签内的内容，然后在 <code>&lt;mirrors&gt;</code> 标签内新增阿里云提供的镜像仓库。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span> </span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>指定 JDK 版本</strong></p>
<p>搜索 <code>&lt;profiles&gt;</code> 标签，添加如下内容可以指定 JDK 版本。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用 JDK1.8 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.8<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br></pre></td></tr></table></figure>
<br />
<h2 id="创建及管理项目">创建及管理项目</h2>
<h3 id="命令行方式">命令行方式</h3>
<h4 id="创建Java项目">创建Java项目</h4>
<p>在终端中进入需要创建项目的目录下，执行 <code>mvn archetype:generate</code> 命令 <strong>创建 Maven Java 项目</strong> 。</p>
<ol>
<li>初次使用时会下载依赖的 Jar 包，且从下载地址中看到是从我们配置的 aliyun 镜像中下载的。</li>
<li>下载完成后提示 <code>Choose archetype</code> ，需要输入 1 到 8 <strong>选择 Maven 项目模版</strong>。若直接回车则选择默认的第 7 个模版 <code>maven-archetype-quickstart</code> 。</li>
<li>接着分别设置 <code>groupId</code>, <code>artifactId</code>, <code>version</code>, <code>package</code> 。</li>
<li>确认后输入 Y 或直接回车完成。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama ~ % cd /Users/yukiyama/maven/workspace/test</span><br><span class="line">yukiyama@yukiyama test % mvn archetype:generate</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.5/maven-clean-plugin-2.5.pom</span><br><span class="line">...(省略)...</span><br><span class="line">[INFO] Generating project in Interactive mode</span><br><span class="line">[WARNING] No archetype found in remote catalog. Defaulting to internal catalog</span><br><span class="line">[INFO] No archetype defined. Using maven-archetype-quickstart (org.apache.maven.archetypes:maven-archetype-quickstart:1.0)</span><br><span class="line">Choose archetype:</span><br><span class="line">1: internal -&gt; org.apache.maven.archetypes:maven-archetype-archetype (An archetype which contains a sample archetype.)</span><br><span class="line">2: internal -&gt; org.apache.maven.archetypes:maven-archetype-j2ee-simple (An archetype which contains a simplifed sample J2EE application.)</span><br><span class="line">3: internal -&gt; org.apache.maven.archetypes:maven-archetype-plugin (An archetype which contains a sample Maven plugin.)</span><br><span class="line">4: internal -&gt; org.apache.maven.archetypes:maven-archetype-plugin-site (An archetype which contains a sample Maven plugin site.</span><br><span class="line">      This archetype can be layered upon an existing Maven plugin project.)</span><br><span class="line">5: internal -&gt; org.apache.maven.archetypes:maven-archetype-portlet (An archetype which contains a sample JSR-268 Portlet.)</span><br><span class="line">6: internal -&gt; org.apache.maven.archetypes:maven-archetype-profiles ()</span><br><span class="line">7: internal -&gt; org.apache.maven.archetypes:maven-archetype-quickstart (An archetype which contains a sample Maven project.)</span><br><span class="line">8: internal -&gt; org.apache.maven.archetypes:maven-archetype-site (An archetype which contains a sample Maven site which demonstrates</span><br><span class="line">      some of the supported document types like APT, XDoc, and FML and demonstrates how</span><br><span class="line">      to i18n your site. This archetype can be layered upon an existing Maven project.)</span><br><span class="line">9: internal -&gt; org.apache.maven.archetypes:maven-archetype-site-simple (An archetype which contains a sample Maven site.)</span><br><span class="line">10: internal -&gt; org.apache.maven.archetypes:maven-archetype-webapp (An archetype which contains a sample Maven Webapp project.)</span><br><span class="line">Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): 7:</span><br><span class="line">Define value for property &#x27;groupId&#x27;: com.yukiyama.maven</span><br><span class="line">Define value for property &#x27;artifactId&#x27;: pro01-maven-java</span><br><span class="line">Define value for property &#x27;version&#x27; 1.0-SNAPSHOT: :</span><br><span class="line">Define value for property &#x27;package&#x27; com.yukiyama.maven: :</span><br><span class="line">Confirm properties configuration:</span><br><span class="line">groupId: com.yukiyama.maven</span><br><span class="line">artifactId: pro01-maven-java</span><br><span class="line">version: 1.0-SNAPSHOT</span><br><span class="line">package: com.yukiyama.maven</span><br><span class="line"> Y: :</span><br><span class="line"> [INFO] ----------------------------------------------------------------------------</span><br><span class="line">[INFO] Using following parameters for creating project from Old (1.x) Archetype: maven-archetype-quickstart:1.1</span><br><span class="line">[INFO] ----------------------------------------------------------------------------</span><br><span class="line">[INFO] Parameter: basedir, Value: /Users/yukiyama/maven/workspace/test</span><br><span class="line">[INFO] Parameter: package, Value: com.yukiyama.maven</span><br><span class="line">[INFO] Parameter: groupId, Value: com.yukiyama.maven</span><br><span class="line">[INFO] Parameter: artifactId, Value: pro01-maven-java</span><br><span class="line">[INFO] Parameter: packageName, Value: com.yukiyama.maven</span><br><span class="line">[INFO] Parameter: version, Value: 1.0-SNAPSHOT</span><br><span class="line">[INFO] project created from Old (1.x) Archetype in dir: /Users/yukiyama/maven/workspace/test/pro01-maven-java</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  06:29 min</span><br><span class="line">[INFO] Finished at: 2022-09-22T02:20:01+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama test %</span><br></pre></td></tr></table></figure>
<p>创建完成后在项目目录下可以看到该项目模版的目录结构。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama test % tree pro01-maven-java</span><br><span class="line">pro01-maven-java</span><br><span class="line">├── pom.xml</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   └── java</span><br><span class="line">    │       └── com</span><br><span class="line">    │           └── yukiyama</span><br><span class="line">    │               └── maven</span><br><span class="line">    │                   └── App.java</span><br><span class="line">    └── test</span><br><span class="line">        └── java</span><br><span class="line">            └── com</span><br><span class="line">                └── yukiyama</span><br><span class="line">                    └── maven</span><br><span class="line">                        └── AppTest.java</span><br></pre></td></tr></table></figure>
<p>目录用途如下。</p>
<table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>源码目录</td>
</tr>
<tr>
<td>main</td>
<td>主体程序目录</td>
</tr>
<tr>
<td>java</td>
<td>Java源码 (<code>.java</code> 文件)</td>
</tr>
<tr>
<td>com</td>
<td>package 目录</td>
</tr>
<tr>
<td>test</td>
<td>测试程序目录</td>
</tr>
</tbody>
</table>
<p>在我们指定的本地仓库中 (<code>repo</code> 文件夹) ，可以看到很多因为本次项目创建而引入的 Jar 包及相关文件。例如对于第一个下载的文件，其下载后的路径如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 下载的第一个文件</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/2.5/maven-clean-plugin-2.5.pom</span><br><span class="line"></span><br><span class="line">// 下载后的路径</span><br><span class="line">repo/org/apache/maven/plugins/maven-clean-plugin/2.5/maven-clean-plugin-2.5.pom</span><br></pre></td></tr></table></figure>
<p>从这里可以看出，路径实际上是由 <code>groupId</code>, <code>artifactId</code> 和 <code>version</code> 组成的。</p>
<br />
<p>pom.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro01-maven-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>pro01-maven-java<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>自动生成的 pom.xml 中依赖的 junit 版本 3.8.1 较低，可按需要改为较新版本，如 4.12 版本。</p>
<br />
<h5 id="项目构建">项目构建</h5>
<p>需要在 <code>pom.xml</code> 文件所在目录下执行构建命令，否则出现如下错误 (… but there is no POM in this directory …)。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama test % mvn compile</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD FAILURE</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  0.107 s</span><br><span class="line">[INFO] Finished at: 2022-09-22T20:14:54+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] The goal you specified requires a project to execute but there is no POM in this directory (/Users/yukiyama/maven/workspace/test). Please verify you invoked Maven from the correct directory. -&gt; [Help 1]</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class="line">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class="line">[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MissingProjectException</span><br><span class="line">yukiyama@yukiyama test %</span><br></pre></td></tr></table></figure>
<br />
<h6 id="编译">编译</h6>
<p>在 Maven 项目的 <code>pom.xml</code> 所在目录下执行 <code>mvn complie</code> 完成编译。首次执行此命令会下载相关 Jar 包。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro01-maven-java % mvn compile</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------&lt; com.yukiyama.maven:pro01-maven-java &gt;-----------------</span><br><span class="line">[INFO] Building pro01-maven-java 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-resources-plugin/2.6/maven-resources-plugin-2.6.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 1 source file to /Users/yukiyama/maven/workspace/test/pro01-maven-java/target/classes</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  01:17 min</span><br><span class="line">[INFO] Finished at: 2022-09-22T16:20:01+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro01-maven-java %</span><br></pre></td></tr></table></figure>
<p>编译完成后可以看到在项目目录下多了 target 文件夹，编译后的 <code>.class</code> 即存放 <code>target/classes</code> 文件夹下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">pro01-maven-java</span><br><span class="line">├── pom.xml</span><br><span class="line">├── src</span><br><span class="line">│   ├── main</span><br><span class="line">│   │   └── java</span><br><span class="line">│   │       └── com</span><br><span class="line">│   │           └── yukiyama</span><br><span class="line">│   │               └── maven</span><br><span class="line">│   │                   └── Calculator.java</span><br><span class="line">│   └── test</span><br><span class="line">│       └── java</span><br><span class="line">│           └── com</span><br><span class="line">│               └── yukiyama</span><br><span class="line">│                   └── maven</span><br><span class="line">│                       └── CalculatorTest.java</span><br><span class="line">└── target</span><br><span class="line">    ├── classes</span><br><span class="line">    │   └── com</span><br><span class="line">    │       └── yukiyama</span><br><span class="line">    │           └── maven</span><br><span class="line">    │               └── Calculator.class</span><br><span class="line">    ├── generated-sources</span><br><span class="line">    │   └── annotations</span><br><span class="line">    └── maven-status</span><br><span class="line">        └── maven-compiler-plugin</span><br><span class="line">            └── compile</span><br><span class="line">                └── default-compile</span><br><span class="line">                    ├── createdFiles.lst</span><br><span class="line">                    └── inputFiles.lst</span><br></pre></td></tr></table></figure>
<br />
<h6 id="测试">测试</h6>
<p>执行 <code>mvn test</code> 可以完成测试。同样地，首次执行时会下载相关 Jar 包 (如下执行已经不是首次执行，所以没有下载 Jar 包的记录)。</p>
<p>可以看到，在执行 <code>test</code> 命令之前，实际上 Maven 还自动依次执行了 <code>resources</code>, <code>compile</code>, <code>testResources</code>, <code>testCompile</code> 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro01-maven-java % mvn test</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------&lt; com.yukiyama.maven:pro01-maven-java &gt;-----------------</span><br><span class="line">[INFO] Building pro01-maven-java 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ pro01-maven-java ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro01-maven-java/src/main/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ pro01-maven-java ---</span><br><span class="line">[INFO] Nothing to compile - all classes are up to date</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ pro01-maven-java ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro01-maven-java/src/test/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ pro01-maven-java ---</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 1 source file to /Users/yukiyama/maven/workspace/test/pro01-maven-java/target/test-classes</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ pro01-maven-java ---</span><br><span class="line">[INFO] Surefire report directory: /Users/yukiyama/maven/workspace/test/pro01-maven-java/target/surefire-reports</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------</span><br><span class="line"> T E S T S</span><br><span class="line">-------------------------------------------------------</span><br><span class="line">Running com.yukiyama.maven.CalculatorTest</span><br><span class="line">完成测试。</span><br><span class="line">Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.103 sec</span><br><span class="line"></span><br><span class="line">Results :</span><br><span class="line"></span><br><span class="line">Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</span><br><span class="line"></span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  2.365 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T14:20:57+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro01-maven-java %</span><br></pre></td></tr></table></figure>
<p>测试完成后可以看到 target 文件夹中多了 <code>test-classes</code> 目录，存放测试源文件编译后的  <code>.class</code> 文件。此外还生成了测试报告，存放于 <code>surefire-reports</code> 文件夹中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">pro01-maven-java</span><br><span class="line">├── pom.xml</span><br><span class="line">├── src</span><br><span class="line">│   ├── main</span><br><span class="line">│   │   └── java</span><br><span class="line">│   │       └── com</span><br><span class="line">│   │           └── yukiyama</span><br><span class="line">│   │               └── maven</span><br><span class="line">│   │                   └── Calculator.java</span><br><span class="line">│   └── test</span><br><span class="line">│       └── java</span><br><span class="line">│           └── com</span><br><span class="line">│               └── yukiyama</span><br><span class="line">│                   └── maven</span><br><span class="line">│                       └── CalculatorTest.java</span><br><span class="line">└── target</span><br><span class="line">    ├── classes</span><br><span class="line">    │   └── com</span><br><span class="line">    │       └── yukiyama</span><br><span class="line">    │           └── maven</span><br><span class="line">    │               └── Calculator.class</span><br><span class="line">    ├── generated-sources</span><br><span class="line">    │   └── annotations</span><br><span class="line">    ├── generated-test-sources</span><br><span class="line">    │   └── test-annotations</span><br><span class="line">    ├── maven-status</span><br><span class="line">    │   └── maven-compiler-plugin</span><br><span class="line">    │       ├── compile</span><br><span class="line">    │       │   └── default-compile</span><br><span class="line">    │       │       ├── createdFiles.lst</span><br><span class="line">    │       │       └── inputFiles.lst</span><br><span class="line">    │       └── testCompile</span><br><span class="line">    │           └── default-testCompile</span><br><span class="line">    │               ├── createdFiles.lst</span><br><span class="line">    │               └── inputFiles.lst</span><br><span class="line">    ├── surefire-reports</span><br><span class="line">    │   ├── TEST-com.yukiyama.maven.CalculatorTest.xml</span><br><span class="line">    │   └── com.yukiyama.maven.CalculatorTest.txt</span><br><span class="line">    └── test-classes</span><br><span class="line">        └── com</span><br><span class="line">            └── yukiyama</span><br><span class="line">                └── maven</span><br><span class="line">                    └── CalculatorTest.class</span><br></pre></td></tr></table></figure>
<br />
<h6 id="清理">清理</h6>
<p>执行 <code>mvn clean</code> 清理当前目录的编译结果。同样地，首次执行时会下载相关 Jar 包。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro01-maven-java % mvn clean</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------&lt; com.yukiyama.maven:pro01-maven-java &gt;-----------------</span><br><span class="line">[INFO] Building pro01-maven-java 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ pro01-maven-java ---</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/codehaus/plexus/plexus-utils/3.0/plexus-utils-3.0.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO] Deleting /Users/yukiyama/maven/workspace/test/pro01-maven-java/target</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  4.845 s</span><br><span class="line">[INFO] Finished at: 2022-09-22T16:36:34+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro01-maven-java %</span><br></pre></td></tr></table></figure>
<p>清理后可看到 target 文件夹已删除。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pro01-maven-java</span><br><span class="line">├── pom.xml</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   └── java</span><br><span class="line">    │       └── com</span><br><span class="line">    │           └── yukiyama</span><br><span class="line">    │               └── maven</span><br><span class="line">    │                   └── Calculator.java</span><br><span class="line">    └── test</span><br><span class="line">        └── java</span><br><span class="line">            └── com</span><br><span class="line">                └── yukiyama</span><br><span class="line">                    └── maven</span><br><span class="line">                        └── CalculatorTest.java</span><br></pre></td></tr></table></figure>
<br />
<h6 id="打包">打包</h6>
<p>执行 <code>mvn package</code> 打包项目为 Jar 包。同样地，首次执行时会下载相关 Jar 包。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro01-maven-java % mvn package</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------&lt; com.yukiyama.maven:pro01-maven-java &gt;-----------------</span><br><span class="line">[INFO] Building pro01-maven-java 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-jar-plugin/2.4/maven-jar-plugin-2.4.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO] Building jar: /Users/yukiyama/maven/workspace/test/pro01-maven-java/target/pro01-maven-java-1.0-SNAPSHOT.jar</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  10.557 s</span><br><span class="line">[INFO] Finished at: 2022-09-22T16:40:38+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro01-maven-java %</span><br></pre></td></tr></table></figure>
<p>打包完成后在 target 目录下可以看到生成了如下 Jar 包，文件名是由 <code>artifactId</code> 和 <code>version</code> 组成的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pro01-maven-java-1.0-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>
<p>解压缩后可看到 Jar 包的如下构成，其中并不包含测试程序的字节码文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pro01-maven-java-1.0-SNAPSHOT</span><br><span class="line">├── META-INF</span><br><span class="line">│   ├── MANIFEST.MF</span><br><span class="line">│   └── maven</span><br><span class="line">│       └── com.yukiyama.maven</span><br><span class="line">│           └── pro01-maven-java</span><br><span class="line">│               ├── pom.properties</span><br><span class="line">│               └── pom.xml</span><br><span class="line">└── com</span><br><span class="line">    └── yukiyama</span><br><span class="line">        └── maven</span><br><span class="line">            └── Calculator.class</span><br></pre></td></tr></table></figure>
<p>其中 <code>pom.xml</code> 文件与原项目中的相同，<code>pom.properties</code> 文件如下。</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Generated by Maven</span></span><br><span class="line"><span class="comment">#Thu Sep 22 16:40:38 CST 2022</span></span><br><span class="line"><span class="attr">groupId</span>=<span class="string">com.yukiyama.maven</span></span><br><span class="line"><span class="attr">artifactId</span>=<span class="string">pro01-maven-java</span></span><br><span class="line"><span class="attr">version</span>=<span class="string">1.0-SNAPSHOT</span></span><br></pre></td></tr></table></figure>
<br />
<h6 id="安装">安装</h6>
<p>执行 <code>mvn install</code> 安装 Jar 包到本地仓库中。从下面的执行日志可看到，在执行安装前，该命令会先完成编译，测试编译，以及测试动作。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro01-maven-java % mvn install</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------&lt; com.yukiyama.maven:pro01-maven-java &gt;-----------------</span><br><span class="line">[INFO] Building pro01-maven-java 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ pro01-maven-java ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro01-maven-java/src/main/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ pro01-maven-java ---</span><br><span class="line">[INFO] Nothing to compile - all classes are up to date</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ pro01-maven-java ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro01-maven-java/src/test/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ pro01-maven-java ---</span><br><span class="line">[INFO] Nothing to compile - all classes are up to date</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ pro01-maven-java ---</span><br><span class="line">[INFO] Surefire report directory: /Users/yukiyama/maven/workspace/test/pro01-maven-java/target/surefire-reports</span><br><span class="line"></span><br><span class="line">-------------------------------------------------------</span><br><span class="line"> T E S T S</span><br><span class="line">-------------------------------------------------------</span><br><span class="line">Running com.yukiyama.maven.CalculatorTest</span><br><span class="line">完成测试。</span><br><span class="line">Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.09 sec</span><br><span class="line"></span><br><span class="line">Results :</span><br><span class="line"></span><br><span class="line">Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</span><br><span class="line"></span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ pro01-maven-java ---</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-install-plugin:2.4:install (default-install) @ pro01-maven-java ---</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/codehaus/plexus/plexus-utils/3.0.5/plexus-utils-3.0.5.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO] Installing /Users/yukiyama/maven/workspace/test/pro01-maven-java/target/pro01-maven-java-1.0-SNAPSHOT.jar to /Users/yukiyama/maven/repo/com/yukiyama/maven/pro01-maven-java/1.0-SNAPSHOT/pro01-maven-java-1.0-SNAPSHOT.jar</span><br><span class="line">[INFO] Installing /Users/yukiyama/maven/workspace/test/pro01-maven-java/pom.xml to /Users/yukiyama/maven/repo/com/yukiyama/maven/pro01-maven-java/1.0-SNAPSHOT/pro01-maven-java-1.0-SNAPSHOT.pom</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  7.432 s</span><br><span class="line">[INFO] Finished at: 2022-09-22T16:55:49+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro01-maven-java %</span><br></pre></td></tr></table></figure>
<p>我们已经知道，无论执行的是 test, package, install 或是其他命令，maven 默认都会「覆盖式」地按既定执行顺序从最开始的阶段到命令所指定的阶段。若希望跳过某个阶段，可加入 <code>-D</code> 参数，举例如下 （<code>-D</code> 和 <code>maven</code> 之间无空格）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean install -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure>
<p>该命令表示执行 <code>mvn clean install</code> 时跳过 <code>test</code> 阶段。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean compile -Dmaven.clean.skip=true -Dmaven.validate.skip=true</span><br></pre></td></tr></table></figure>
<p>该命令表示执行 <code>mvn clean compile</code> 时跳过 <code>clean</code> 和 <code>validate</code> 阶段。</p>
<p>安装到本地仓库中的路径是根据该项目的坐标生成的。在本地仓库 <code>repo</code> 目录下，可以看到如下文件结构。安装到本地仓库后的 Jar 包文件名不变，但 <code>pom.xml</code> 变为 <code>pro01-maven-java-1.0-SNAPSHOT.pom</code> ，它们内容相同。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">com</span><br><span class="line">└── yukiyama</span><br><span class="line">    └── maven</span><br><span class="line">        └── pro01-maven-java</span><br><span class="line">            ├── 1.0-SNAPSHOT</span><br><span class="line">            │   ├── _remote.repositories</span><br><span class="line">            │   ├── maven-metadata-local.xml</span><br><span class="line">            │   ├── pro01-maven-java-1.0-SNAPSHOT.jar</span><br><span class="line">            │   └── pro01-maven-java-1.0-SNAPSHOT.pom</span><br><span class="line">            └── maven-metadata-local.xml</span><br></pre></td></tr></table></figure>
<p>此外，还可以使用 <code>mvn clean install</code> 完成安装，实际效果等同于先执行 <code>mvn clean</code> 再执行 <code>mvn install</code> 。</p>
<br />
<h4 id="创建Web项目">创建Web项目</h4>
<p>在终端中进入工作目录下，执行如下命令创建 Maven Web 项目 (参考 Maven 官网 <a target="_blank" rel="noopener" href="https://maven.apache.org/archetypes/maven-archetype-webapp/">Maven Webapp Archetype</a>)。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-webapp -DarchetypeVersion=1.4</span><br></pre></td></tr></table></figure>
<ol>
<li>初次使用时会下载依赖的 Jar 包，且从下载地址中看到是从我们配置的 aliyun 镜像中下载的。</li>
<li>下载完成后根据提示设置 <code>groupId</code>, <code>artifactId</code>, <code>version</code>, <code>package</code> 或直接回车使用默认值。</li>
<li>确认后输入 Y 或直接回车完成。</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama test % mvn archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-webapp -DarchetypeVersion=1.4</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------</span><br><span class="line">[INFO] Building Maven Stub Project (No POM) 1</span><br><span class="line">[INFO] --------------------------------[ pom ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] &gt;&gt;&gt; maven-archetype-plugin:3.2.1:generate (default-cli) &gt; generate-sources @ standalone-pom &gt;&gt;&gt;</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] &lt;&lt;&lt; maven-archetype-plugin:3.2.1:generate (default-cli) &lt; generate-sources @ standalone-pom &lt;&lt;&lt;</span><br><span class="line">[INFO]</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-archetype-plugin:3.2.1:generate (default-cli) @ standalone-pom ---</span><br><span class="line">[INFO] Generating project in Interactive mode</span><br><span class="line">[WARNING] No archetype found in remote catalog. Defaulting to internal catalog</span><br><span class="line">[INFO] Archetype repository not defined. Using the one from [org.apache.maven.archetypes:maven-archetype-webapp:1.0] found in catalog internal</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/archetypes/maven-archetype-webapp/1.4/maven-archetype-webapp-1.4.pom</span><br><span class="line">...(略)...</span><br><span class="line">Define value for property &#x27;groupId&#x27;: com.yukiyama.maven</span><br><span class="line">Define value for property &#x27;artifactId&#x27;: pro02-maven-web</span><br><span class="line">Define value for property &#x27;version&#x27; 1.0-SNAPSHOT: :</span><br><span class="line">Define value for property &#x27;package&#x27; com.yukiyama.maven: :</span><br><span class="line">Confirm properties configuration:</span><br><span class="line">groupId: com.yukiyama.maven</span><br><span class="line">artifactId: pro02-maven-web</span><br><span class="line">version: 1.0-SNAPSHOT</span><br><span class="line">package: com.yukiyama.maven</span><br><span class="line"> Y: :</span><br><span class="line">[INFO] ----------------------------------------------------------------------------</span><br><span class="line">[INFO] Using following parameters for creating project from Archetype: maven-archetype-webapp:1.4</span><br><span class="line">[INFO] ----------------------------------------------------------------------------</span><br><span class="line">[INFO] Parameter: groupId, Value: com.yukiyama.maven</span><br><span class="line">[INFO] Parameter: artifactId, Value: pro02-maven-web</span><br><span class="line">[INFO] Parameter: version, Value: 1.0-SNAPSHOT</span><br><span class="line">[INFO] Parameter: package, Value: com.yukiyama.maven</span><br><span class="line">[INFO] Parameter: packageInPathFormat, Value: com/yukiyama/maven</span><br><span class="line">[INFO] Parameter: package, Value: com.yukiyama.maven</span><br><span class="line">[INFO] Parameter: groupId, Value: com.yukiyama.maven</span><br><span class="line">[INFO] Parameter: artifactId, Value: pro02-maven-web</span><br><span class="line">[INFO] Parameter: version, Value: 1.0-SNAPSHOT</span><br><span class="line">[INFO] Project created from Archetype in dir: /Users/yukiyama/maven/workspace/test/pro02-maven-web</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  39.864 s</span><br><span class="line">[INFO] Finished at: 2022-09-22T17:21:41+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama test %</span><br></pre></td></tr></table></figure>
<p>创建完成后在项目目录下可以看到该项目模版的目录结构。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pro02-maven-web</span><br><span class="line">├── pom.xml</span><br><span class="line">└── src</span><br><span class="line">    └── main</span><br><span class="line">        └── webapp</span><br><span class="line">            ├── WEB-INF</span><br><span class="line">            │   └── web.xml</span><br><span class="line">            └── index.jsp</span><br></pre></td></tr></table></figure>
<p>目录用途如下。需要注意的时，不同于 archetype-quickstart ，archetype-webapp 不会自动生成 test 目录，若需要，需手动创建。</p>
<table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>src</td>
<td>源码目录</td>
</tr>
<tr>
<td>main</td>
<td>主体程序目录</td>
</tr>
<tr>
<td>webapp</td>
<td>web 应用目录</td>
</tr>
</tbody>
</table>
<br />
<p>pom.xml</p>
<p>可以看到打包方式 ( <code>&lt;package&gt;</code> 标签) 与之前的 Java 项目不同，为 <code>war</code> 方式。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro02-maven-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>pro02-maven-web Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- FIXME change it to the project&#x27;s website --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.example.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>pro02-maven-web<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span><span class="comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<br />
<h5 id="准备">准备</h5>
<h6 id="新建Java文件">新建Java文件</h6>
<p>由于前述创建项目的命令未帮助我们创建 Java 源文件，需要手动创建，如下，我们在 <code>src/main</code> 下创建 <code>java/com/yukiyama/maven</code> 路径，然后创建如下 <code>HelloServlet.java</code> 文件。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.yukiyama.maven;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;hello maven web&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br />
<h6 id="注册Servlet">注册Servlet</h6>
<p>将如下 xml 标签内容添加到 <code>web.xml</code> 中的 <code>&lt;web-app&gt;</code> 下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.atguigu.maven.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<br />
<h6 id="编写超链接">编写超链接</h6>
<p>在 index.jsp 中写入超链接 <code>&lt;a href=&quot;helloServlet&quot;&gt;Access Servlet&lt;/a&gt;</code> 。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class="line">&lt;!-- 添加超链接 --&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;helloServlet&quot;</span>&gt;Access Servlet&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<br />
<h5 id="项目构建-2">项目构建</h5>
<p>与构建 Maven Java 项目一样，需要在 <code>pom.xml</code> 文件所在命令下执行构建命令。</p>
<br />
<h6 id="编译-2">编译</h6>
<p>在 Maven 项目的 <code>pom.xml</code> 所在目录下执行 <code>mvn complie</code> 完成编译，首次执行此命令会下载相关 Jar 包。执行后可能出现如下错误。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn compile</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-resources-plugin/3.0.2/maven-resources-plugin-3.0.2.pom</span><br><span class="line">...(略：Jar 包下载)...</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 1 source file to /Users/yukiyama/maven/workspace/test/pro02-maven-web/target/classes</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] COMPILATION ERROR :</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] /Users/yukiyama/maven/workspace/test/pro02-maven-web/src/main/java/com/yukiyama/maven/HelloServlet.java:[3,26] package javax.servlet.http does not exist</span><br><span class="line">...(略：多条错误信息)...</span><br><span class="line">[INFO] 8 errors</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD FAILURE</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  01:27 min</span><br><span class="line">[INFO] Finished at: 2022-09-22T20:02:13+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.0:compile (default-compile) on project pro02-maven-web: Compilation failure: Compilation failure:</span><br><span class="line">...(略：多条错误信息)...</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<p>失败是由于缺少 <code>servlet-api.jar</code> 依赖导致的。可以在 <code>mvnrepository</code> <a target="_blank" rel="noopener" href="https://mvnrepository.com/">网站</a> 查找该依赖的坐标信息，将其添加到 <code>pom.xml</code> 的 <code>&lt;dependencies&gt;</code> 标签下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再重新执行 <code>mvn compile</code> 命令，可以看到，下载了 <code>servlet-api</code>  Jar 包及其他相关文件，之后成功完成。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn compile</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.pom</span><br><span class="line">Downloaded from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.pom (14 kB at 3.8 kB/s)</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/net/java/jvnet-parent/3/jvnet-parent-3.pom</span><br><span class="line">Downloaded from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/net/java/jvnet-parent/3/jvnet-parent-3.pom (4.8 kB at 5.5 kB/s)</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar</span><br><span class="line">Downloaded from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar (96 kB at 39 kB/s)</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ pro02-maven-web ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro02-maven-web/src/main/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ pro02-maven-web ---</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 1 source file to /Users/yukiyama/maven/workspace/test/pro02-maven-web/target/classes</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  10.455 s</span><br><span class="line">[INFO] Finished at: 2022-09-22T20:19:53+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<p>编译完成后可以看到在项目目录下多了 target 文件夹，编译后的 <code>.class</code> 即存放在 <code>target/classes</code> 文件夹下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">pro02-maven-web</span><br><span class="line">├── pom.xml</span><br><span class="line">├── src</span><br><span class="line">│   └── main</span><br><span class="line">│       ├── java</span><br><span class="line">│       │   └── com</span><br><span class="line">│       │       └── yukiyama</span><br><span class="line">│       │           └── maven</span><br><span class="line">│       │               └── HelloServlet.java</span><br><span class="line">│       └── webapp</span><br><span class="line">│           ├── WEB-INF</span><br><span class="line">│           │   └── web.xml</span><br><span class="line">│           └── index.jsp</span><br><span class="line">└── target</span><br><span class="line">    ├── classes</span><br><span class="line">    │   └── com</span><br><span class="line">    │       └── yukiyama</span><br><span class="line">    │           └── maven</span><br><span class="line">    │               └── HelloServlet.class</span><br><span class="line">    ├── generated-sources</span><br><span class="line">    │   └── annotations</span><br><span class="line">    └── maven-status</span><br><span class="line">        └── maven-compiler-plugin</span><br><span class="line">            └── compile</span><br><span class="line">                └── default-compile</span><br><span class="line">                    ├── createdFiles.lst</span><br><span class="line">                    └── inputFiles.lst</span><br></pre></td></tr></table></figure>
<br />
<h6 id="清理-2">清理</h6>
<p>执行 <code>mvn clean</code> 清理当前目录的编译结果。同样地，首次执行时会下载相关 Jar 包。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn clean</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-clean-plugin/3.1.0/maven-clean-plugin-3.1.0.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:3.1.0:clean (default-clean) @ pro02-maven-web ---</span><br><span class="line">[INFO] Deleting /Users/yukiyama/maven/workspace/test/pro02-maven-web/target</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  7.774 s</span><br><span class="line">[INFO] Finished at: 2022-09-22T20:26:09+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<p>清理后可看到 target 文件夹已删除。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pro02-maven-web</span><br><span class="line">├── pom.xml</span><br><span class="line">└── src</span><br><span class="line">    └── main</span><br><span class="line">        ├── java</span><br><span class="line">        │   └── com</span><br><span class="line">        │       └── yukiyama</span><br><span class="line">        │           └── maven</span><br><span class="line">        │               └── HelloServlet.java</span><br><span class="line">        └── webapp</span><br><span class="line">            ├── WEB-INF</span><br><span class="line">            │   └── web.xml</span><br><span class="line">            └── index.jsp</span><br></pre></td></tr></table></figure>
<br />
<h6 id="打包-2">打包</h6>
<p>执行 <code>mvn package</code> 或者 <code>mvn clean package</code> 打包项目为 war 包。同样地，首次执行时会下载相关 Jar 包。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn clean package</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/plugins/maven-surefire-plugin/2.22.1/maven-surefire-plugin-2.22.1.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO] Packaging webapp</span><br><span class="line">[INFO] Assembling webapp [pro02-maven-web] in [/Users/yukiyama/maven/workspace/test/pro02-maven-web/target/pro02-maven-web]</span><br><span class="line">[INFO] Processing war project</span><br><span class="line">[INFO] Copying webapp resources [/Users/yukiyama/maven/workspace/test/pro02-maven-web/src/main/webapp]</span><br><span class="line">[INFO] Webapp assembled in [107 msecs]</span><br><span class="line">[INFO] Building war: /Users/yukiyama/maven/workspace/test/pro02-maven-web/target/pro02-maven-web.war</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  02:04 min</span><br><span class="line">[INFO] Finished at: 2022-09-22T20:33:18+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<p>打包完成后在 target 目录下可以看到生成了如下 war 包 <code>pro02-maven-web.war</code> 及其解压后的文件夹。war 包文件名即 <code>artifactId</code> 。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">pro02-maven-web</span><br><span class="line">├── pom.xml</span><br><span class="line">├── src</span><br><span class="line">│   └── main</span><br><span class="line">│       ├── java</span><br><span class="line">│       │   └── com</span><br><span class="line">│       │       └── yukiyama</span><br><span class="line">│       │           └── maven</span><br><span class="line">│       │               └── HelloServlet.java</span><br><span class="line">│       └── webapp</span><br><span class="line">│           ├── WEB-INF</span><br><span class="line">│           │   └── web.xml</span><br><span class="line">│           └── index.jsp</span><br><span class="line">└── target</span><br><span class="line">    ├── classes</span><br><span class="line">    │   └── com</span><br><span class="line">    │       └── yukiyama</span><br><span class="line">    │           └── maven</span><br><span class="line">    │               └── HelloServlet.class</span><br><span class="line">    ├── generated-sources</span><br><span class="line">    │   └── annotations</span><br><span class="line">    ├── maven-archiver</span><br><span class="line">    │   └── pom.properties</span><br><span class="line">    ├── maven-status</span><br><span class="line">    │   └── maven-compiler-plugin</span><br><span class="line">    │       └── compile</span><br><span class="line">    │           └── default-compile</span><br><span class="line">    │               ├── createdFiles.lst</span><br><span class="line">    │               └── inputFiles.lst</span><br><span class="line">    ├── pro02-maven-web</span><br><span class="line">    │   ├── META-INF</span><br><span class="line">    │   ├── WEB-INF</span><br><span class="line">    │   │   ├── classes</span><br><span class="line">    │   │   │   └── com</span><br><span class="line">    │   │   │       └── yukiyama</span><br><span class="line">    │   │   │           └── maven</span><br><span class="line">    │   │   │               └── HelloServlet.class</span><br><span class="line">    │   │   └── web.xml</span><br><span class="line">    │   └── index.jsp</span><br><span class="line">    └── pro02-maven-web.war</span><br></pre></td></tr></table></figure>
<br />
<h6 id="测试-2">测试</h6>
<p>首先在此 web 工程下添加之前创建的 java 工程。做法是在 <code>pom.xml</code> 中添加如下 <code>&lt;dependency&gt;</code> 内容。</p>
<p>注意，<code>&lt;scope&gt;</code> 表示该依赖的范围，默认是 <code>compile</code> ，因此可以不写。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 导入 Maven Java 工程依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro01-maven-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接着执行 <code>mvn test</code> 完成测试。同样地，首次执行时会下载相关 Jar 包。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn test</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:3.0.2:resources (default-resources) @ pro02-maven-web ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro02-maven-web/src/main/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ pro02-maven-web ---</span><br><span class="line">[INFO] Nothing to compile - all classes are up to date</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:3.0.2:testResources (default-testResources) @ pro02-maven-web ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro02-maven-web/src/test/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.8.0:testCompile (default-testCompile) @ pro02-maven-web ---</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 1 source file to /Users/yukiyama/maven/workspace/test/pro02-maven-web/target/test-classes</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-surefire-plugin:2.22.1:test (default-test) @ pro02-maven-web ---</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/surefire/surefire-junit4/2.22.1/surefire-junit4-2.22.1.pom</span><br><span class="line">Downloaded from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/surefire/surefire-junit4/2.22.1/surefire-junit4-2.22.1.pom (3.1 kB at 1.9 kB/s)</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/surefire/surefire-providers/2.22.1/surefire-providers-2.22.1.pom</span><br><span class="line">Downloaded from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/surefire/surefire-providers/2.22.1/surefire-providers-2.22.1.pom (2.5 kB at 3.6 kB/s)</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/surefire/surefire-junit4/2.22.1/surefire-junit4-2.22.1.jar</span><br><span class="line">Downloaded from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/apache/maven/surefire/surefire-junit4/2.22.1/surefire-junit4-2.22.1.jar (85 kB at 123 kB/s)</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -------------------------------------------------------</span><br><span class="line">[INFO]  T E S T S</span><br><span class="line">[INFO] -------------------------------------------------------</span><br><span class="line">[INFO] Running com.yukiyama.maven.CalculatorTest</span><br><span class="line">完成测试。</span><br><span class="line">[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.076 s - in com.yukiyama.maven.CalculatorTest</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] Results:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  6.989 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T14:44:38+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<p>测试完成后可以看到 target 文件夹中多了 <code>test-classes</code> 目录，存放测试源文件编译后的  <code>.class</code> 文件。此外还生成了测试报告，存放于 <code>surefire-reports</code> 文件夹中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">pro02-maven-web</span><br><span class="line">├── pom.xml</span><br><span class="line">├── src</span><br><span class="line">│   ├── main</span><br><span class="line">│   │   ├── java</span><br><span class="line">│   │   │   └── com</span><br><span class="line">│   │   │       └── yukiyama</span><br><span class="line">│   │   │           └── maven</span><br><span class="line">│   │   │               └── HelloServlet.java</span><br><span class="line">│   │   └── webapp</span><br><span class="line">│   │       ├── WEB-INF</span><br><span class="line">│   │       │   └── web.xml</span><br><span class="line">│   │       └── index.jsp</span><br><span class="line">│   └── test</span><br><span class="line">│       └── java</span><br><span class="line">│           └── com</span><br><span class="line">│               └── yukiyama</span><br><span class="line">│                   └── maven</span><br><span class="line">│                       └── CalculatorTest.java</span><br><span class="line">└── target</span><br><span class="line">    ├── classes</span><br><span class="line">    │   └── com</span><br><span class="line">    │       └── yukiyama</span><br><span class="line">    │           └── maven</span><br><span class="line">    │               └── HelloServlet.class</span><br><span class="line">    ├── generated-sources</span><br><span class="line">    │   └── annotations</span><br><span class="line">    ├── generated-test-sources</span><br><span class="line">    │   └── test-annotations</span><br><span class="line">    ├── maven-archiver</span><br><span class="line">    │   └── pom.properties</span><br><span class="line">    ├── maven-status</span><br><span class="line">    │   └── maven-compiler-plugin</span><br><span class="line">    │       ├── compile</span><br><span class="line">    │       │   └── default-compile</span><br><span class="line">    │       │       ├── createdFiles.lst</span><br><span class="line">    │       │       └── inputFiles.lst</span><br><span class="line">    │       └── testCompile</span><br><span class="line">    │           └── default-testCompile</span><br><span class="line">    │               ├── createdFiles.lst</span><br><span class="line">    │               └── inputFiles.lst</span><br><span class="line">    ├── pro02-maven-web</span><br><span class="line">    │   ├── META-INF</span><br><span class="line">    │   ├── WEB-INF</span><br><span class="line">    │   │   ├── classes</span><br><span class="line">    │   │   │   └── com</span><br><span class="line">    │   │   │       └── yukiyama</span><br><span class="line">    │   │   │           └── maven</span><br><span class="line">    │   │   │               └── HelloServlet.class</span><br><span class="line">    │   │   └── web.xml</span><br><span class="line">    │   └── index.jsp</span><br><span class="line">    ├── pro02-maven-web.war</span><br><span class="line">    ├── surefire-reports</span><br><span class="line">    │   ├── TEST-com.yukiyama.maven.CalculatorTest.xml</span><br><span class="line">    │   └── com.yukiyama.maven.CalculatorTest.txt</span><br><span class="line">    └── test-classes</span><br><span class="line">        └── com</span><br><span class="line">            └── yukiyama</span><br><span class="line">                └── maven</span><br><span class="line">                    └── CalculatorTest.class</span><br></pre></td></tr></table></figure>
<br />
<h6 id="再次打包">再次打包</h6>
<p>再次执行 <code>mvn package</code> 或者 <code>mvn clean package</code> 再次打包项目，可以看到，除了生成 war 包外，所依赖的 Java 项目被打包在 <code>/target/pro02-maven-web/WEB-INF/lib</code> 下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">pro02-maven-web</span><br><span class="line">├── pom.xml</span><br><span class="line">├── src</span><br><span class="line">│   ├── main</span><br><span class="line">│   │   ├── java</span><br><span class="line">│   │   │   └── com</span><br><span class="line">│   │   │       └── yukiyama</span><br><span class="line">│   │   │           └── maven</span><br><span class="line">│   │   │               └── HelloServlet.java</span><br><span class="line">│   │   └── webapp</span><br><span class="line">│   │       ├── WEB-INF</span><br><span class="line">│   │       │   └── web.xml</span><br><span class="line">│   │       └── index.jsp</span><br><span class="line">│   └── test</span><br><span class="line">│       └── java</span><br><span class="line">│           └── com</span><br><span class="line">│               └── yukiyama</span><br><span class="line">│                   └── maven</span><br><span class="line">│                       └── CalculatorTest.java</span><br><span class="line">└── target</span><br><span class="line">    ├── classes</span><br><span class="line">    │   └── com</span><br><span class="line">    │       └── yukiyama</span><br><span class="line">    │           └── maven</span><br><span class="line">    │               └── HelloServlet.class</span><br><span class="line">    ├── generated-sources</span><br><span class="line">    │   └── annotations</span><br><span class="line">    ├── generated-test-sources</span><br><span class="line">    │   └── test-annotations</span><br><span class="line">    ├── maven-archiver</span><br><span class="line">    │   └── pom.properties</span><br><span class="line">    ├── maven-status</span><br><span class="line">    │   └── maven-compiler-plugin</span><br><span class="line">    │       ├── compile</span><br><span class="line">    │       │   └── default-compile</span><br><span class="line">    │       │       ├── createdFiles.lst</span><br><span class="line">    │       │       └── inputFiles.lst</span><br><span class="line">    │       └── testCompile</span><br><span class="line">    │           └── default-testCompile</span><br><span class="line">    │               ├── createdFiles.lst</span><br><span class="line">    │               └── inputFiles.lst</span><br><span class="line">    ├── pro02-maven-web</span><br><span class="line">    │   ├── META-INF</span><br><span class="line">    │   ├── WEB-INF</span><br><span class="line">    │   │   ├── classes</span><br><span class="line">    │   │   │   └── com</span><br><span class="line">    │   │   │       └── yukiyama</span><br><span class="line">    │   │   │           └── maven</span><br><span class="line">    │   │   │               └── HelloServlet.class</span><br><span class="line">    │   │   ├── lib</span><br><span class="line">    │   │   │   └── pro01-maven-java-1.0-SNAPSHOT.jar</span><br><span class="line">    │   │   └── web.xml</span><br><span class="line">    │   └── index.jsp</span><br><span class="line">    ├── pro02-maven-web.war</span><br><span class="line">    ├── surefire-reports</span><br><span class="line">    │   ├── TEST-com.yukiyama.maven.CalculatorTest.xml</span><br><span class="line">    │   └── com.yukiyama.maven.CalculatorTest.txt</span><br><span class="line">    └── test-classes</span><br><span class="line">        └── com</span><br><span class="line">            └── yukiyama</span><br><span class="line">                └── maven</span><br><span class="line">                    └── CalculatorTest.class</span><br></pre></td></tr></table></figure>
<br />
<h4 id="依赖">依赖</h4>
<h5 id="查看依赖">查看依赖</h5>
<p>执行 <code>mvn dependency:list</code> 可查看当前项目的依赖包列表。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn dependency:list</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:list (default-cli) @ pro02-maven-web ---</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] The following files have been resolved:</span><br><span class="line">[INFO]    org.hamcrest:hamcrest-core:jar:1.3:test</span><br><span class="line">[INFO]    javax.servlet:javax.servlet-api:jar:3.1.0:provided</span><br><span class="line">[INFO]    com.yukiyama.maven:pro01-maven-java:jar:1.0-SNAPSHOT:compile</span><br><span class="line">[INFO]    junit:junit:jar:4.12:test</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  2.166 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T14:55:51+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<p>也可以执行 <code>mvn dependency:tree</code> 以树形结构查看。树形结构可看出依赖包的传递过程。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn dependency:tree</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ pro02-maven-web ---</span><br><span class="line">[INFO] com.yukiyama.maven:pro02-maven-web:war:1.0-SNAPSHOT</span><br><span class="line">[INFO] +- junit:junit:jar:4.12:test</span><br><span class="line">[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test</span><br><span class="line">[INFO] +- javax.servlet:javax.servlet-api:jar:3.1.0:provided</span><br><span class="line">[INFO] \- com.yukiyama.maven:pro01-maven-java:jar:1.0-SNAPSHOT:compile</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  3.126 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T14:57:02+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<br />
<h5 id="依赖范围">依赖范围</h5>
<p><code>&lt;dependency&gt;</code> 标签下的 <code>&lt;scope&gt;</code> 标签表示该依赖的范围，即该依赖 (Jar) 包可以作用于哪些目录下 (的 Java 文件中)，通俗地说就是哪些地方的 Java 文件能够引用该依赖 Jar 包中的类。常用的 scope 有 compile, test, provided。</p>
<table>
<thead>
<tr>
<th>scope</th>
<th>main目录</th>
<th>test目录</th>
<th>开发过程</th>
<th>部署到服务器</th>
</tr>
</thead>
<tbody>
<tr>
<td>compile</td>
<td>有效</td>
<td>有效</td>
<td>有效</td>
<td>有效</td>
</tr>
<tr>
<td>test</td>
<td>无效</td>
<td>有效</td>
<td>有效</td>
<td>无效</td>
</tr>
<tr>
<td>provided</td>
<td>有效</td>
<td>有效</td>
<td>有效</td>
<td>无效</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>compile：在项目实际运行时真正要用到的 jar 包都是以 compile 范围进行依赖的，例如 SSM 框架所需 jar 包。<strong>compile 是默认的</strong>，可以不必在 dependency 中显式写出。</p>
</li>
<li>
<p>test：测试过程中使用的 jar 包，例如 junit。</p>
</li>
<li>
<p>provided：通常为开发过程中所需的「服务器上的 jar包」，例如 servlet-api、jsp-api。开发测试时需要，但由于服务器已提供，部署到服务器时不需要。这是为了避免和服务器已存在的同类 jar 包冲突， 同时减轻服务器的负担，因此 provided 的 jar 包部署，不会放入 war 包中。</p>
</li>
</ul>
<p><strong>测试在 main 下依赖 test 范围的 jar 包</strong></p>
<p>在 main 中的 java 文件导入 junit，即加入 <code>import org.junit.Test;</code> ，然后执行 <code>mvn compile</code> ，报如下错误 (… package org.junit does not exist …)。说明 test 依赖范围的 Jar 包 (类) 不会作用于 main 目录下的 Java 文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro01-maven-java % mvn clean compile</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------&lt; com.yukiyama.maven:pro01-maven-java &gt;-----------------</span><br><span class="line">[INFO] Building pro01-maven-java 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ pro01-maven-java ---</span><br><span class="line">[INFO] Deleting /Users/yukiyama/maven/workspace/test/pro01-maven-java/target</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ pro01-maven-java ---</span><br><span class="line">[INFO] Using &#x27;UTF-8&#x27; encoding to copy filtered resources.</span><br><span class="line">[INFO] skip non existing resourceDirectory /Users/yukiyama/maven/workspace/test/pro01-maven-java/src/main/resources</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ pro01-maven-java ---</span><br><span class="line">[INFO] Changes detected - recompiling the module!</span><br><span class="line">[INFO] Compiling 1 source file to /Users/yukiyama/maven/workspace/test/pro01-maven-java/target/classes</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] COMPILATION ERROR :</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[ERROR] /Users/yukiyama/maven/workspace/test/pro01-maven-java/src/main/java/com/yukiyama/maven/Calculator.java:[3,17] package org.junit does not exist</span><br><span class="line">[INFO] 1 error</span><br><span class="line">[INFO] -------------------------------------------------------------</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD FAILURE</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  2.683 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T17:04:44+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project pro01-maven-java: Compilation failure</span><br><span class="line">[ERROR] /Users/yukiyama/maven/workspace/test/pro01-maven-java/src/main/java/com/yukiyama/maven/Calculator.java:[3,17] package org.junit does not exist</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] -&gt; [Help 1]</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.</span><br><span class="line">[ERROR] Re-run Maven using the -X switch to enable full debug logging.</span><br><span class="line">[ERROR]</span><br><span class="line">[ERROR] For more information about the errors and possible solutions, please read the following articles:</span><br><span class="line">[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException</span><br><span class="line">yukiyama@yukiyama pro01-maven-java %</span><br></pre></td></tr></table></figure>
<p><strong>测试 test 和 provided 范围不参与服务器部署</strong></p>
<p>在前述 web 工程「再次打包」后，我们已经看到，在 <code>/target/pro02-maven-web/WEB-INF/lib</code> 下打包了 compile 范围的 <code>pro01-maven-java-1.0-SNAPSHOT.jar</code> ，但并未打包 test 范围的 <code>junit</code> 以及 provided 范围的 <code>javax.servlet-api</code> 。</p>
<br />
<h5 id="依赖传递">依赖传递</h5>
<p>A 依赖 B，B 依赖 C 时，A 是否自动依赖 C 取决于 B 依赖 C 时在 B 的 pom.xml 中定义的对 C 的依赖范围。该范围为 compile 时可以传递，为 test 或 privoided 时不能传递。不能传递而 A 又需要依赖 C 时，就必须在 A 的 pom.xml 中明确添加上 C 的 dependency 。</p>
<p><strong>测试依赖传递</strong></p>
<p>在 <code>pro01-maven-java</code> 工程的 pom.xml 中添加如下依赖 (默认 compile)。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接着执行 <code>mvn dependency:tree</code> ，可以看到 junit 所依赖的 hamcrest 和 spring-core 所依赖的 commons-logging 被传递到了当前工程。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro01-maven-java % mvn dependency:tree</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ----------------&lt; com.yukiyama.maven:pro01-maven-java &gt;-----------------</span><br><span class="line">[INFO] Building pro01-maven-java 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ pro01-maven-java ---</span><br><span class="line">[INFO] com.yukiyama.maven:pro01-maven-java:jar:1.0-SNAPSHOT</span><br><span class="line">[INFO] +- junit:junit:jar:4.12:test</span><br><span class="line">[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test</span><br><span class="line">[INFO] \- org.springframework:spring-core:jar:4.0.0.RELEASE:compile</span><br><span class="line">[INFO]    \- commons-logging:commons-logging:jar:1.1.1:compile</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  1.855 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T17:32:14+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro01-maven-java %</span><br></pre></td></tr></table></figure>
<p>接着以 <code>pro02-maven-web</code> 为 A， <code>pro01-maven-java</code> 为 B 测试依赖传递。要先重新在 <code>pro01-maven-java</code> 下执行 <code>mvn clean install</code> 更新其在本地仓库中的包。然后再在  <code>pro02-maven-web</code> 中执行 <code>mvn dependency:tree</code> 查看依赖传递信息。可以看到在 <code>pro01-maven-java</code> (B) 下，传递了 compile 范围的 spring-core ，而未传递 B 中 test 范围的 junit 以及 provided 范围的 javax.servlet-api 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn dependency:tree</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ pro02-maven-web ---</span><br><span class="line">[INFO] com.yukiyama.maven:pro02-maven-web:war:1.0-SNAPSHOT</span><br><span class="line">[INFO] +- junit:junit:jar:4.12:test</span><br><span class="line">[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test</span><br><span class="line">[INFO] +- javax.servlet:javax.servlet-api:jar:3.1.0:provided</span><br><span class="line">[INFO] \- com.yukiyama.maven:pro01-maven-java:jar:1.0-SNAPSHOT:compile</span><br><span class="line">[INFO]    \- org.springframework:spring-core:jar:4.0.0.RELEASE:compile</span><br><span class="line">[INFO]       \- commons-logging:commons-logging:jar:1.1.1:compile</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  1.601 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T18:13:42+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<br />
<h5 id="依赖排除">依赖排除</h5>
<p>有 A -&gt; B -&gt; Z 和 A -&gt; C -&gt; Z 依赖关系时，因为前者已经通过依赖传递依赖了 Z，为了避免 jar 包冲突，后者可以排除依赖，即可以在 A 的 pom.xml 中的 C 的 <code>&lt;dependency&gt;</code> 标签中使用 <code>&lt;exclusions&gt;</code> ,<code> &lt;exclusion&gt;</code> 标签， 阻止 C 将 Z 传递到 A。</p>
<p>在 <code>pro02-maven-web</code> 的 pom.xml 文件对 <code>pro01-maven-java</code> 的依赖修改如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro01-maven-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 添加依赖排除 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 不需要写version --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>可以看到 <code>commons-logging</code> 已被排除。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro02-maven-web % mvn dependency:tree</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] -----------------&lt; com.yukiyama.maven:pro02-maven-web &gt;-----------------</span><br><span class="line">[INFO] Building pro02-maven-web Maven Webapp 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ war ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ pro02-maven-web ---</span><br><span class="line">[INFO] com.yukiyama.maven:pro02-maven-web:war:1.0-SNAPSHOT</span><br><span class="line">[INFO] +- junit:junit:jar:4.12:test</span><br><span class="line">[INFO] |  \- org.hamcrest:hamcrest-core:jar:1.3:test</span><br><span class="line">[INFO] +- javax.servlet:javax.servlet-api:jar:3.1.0:provided</span><br><span class="line">[INFO] \- com.yukiyama.maven:pro01-maven-java:jar:1.0-SNAPSHOT:compile</span><br><span class="line">[INFO]    \- org.springframework:spring-core:jar:4.0.0.RELEASE:compile</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  1.656 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T18:27:39+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro02-maven-web %</span><br></pre></td></tr></table></figure>
<br />
<h4 id="继承">继承</h4>
<p>描述工程之间的继承关系，即 B 工程继承 A 工程，配置表现为 A 工程的 pom.xml 中的 <code>&lt;packaging&gt;</code> 标签为 <code>pom</code> ，表示 A 工程是一个用于管理工程的工程，即父工程。而 B 工程的 pom.xml 文件中具有 <code>&lt;parent&gt;</code> 标签描述 A 工程，表示 B 工程为 A 工程的子工程。</p>
<p>工程的继承关系建立后，可在父工程中统一管理项目中的依赖信息 (主要指依赖的版本) 。一个复杂的工程的「工程层级」很多，良好的依赖的组合方案通过继承可以在创建新项目时复用，节约时间的同时保证项目依赖关系的准确性 (经过了实践的组合方案)。</p>
<p>首先创建一个名为 <code>pro03-maven-parent</code> 的 Maven java 工程，然后修改 pom.xml 中的打包方式为 pom。<code>&lt;dependencies&gt;</code> 标签可以删除。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro03-maven-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接着在 <code>pro03-maven-parent</code> 目录下新建三个子工程。完成后父工程的 pom.xml 中新增了记录子工程信息的 <code>&lt;modules&gt;</code> 标签。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span>&gt;</span>pro04-maven-module<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span>&gt;</span>pro05-maven-module<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span>&gt;</span>pro06-maven-module<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>而子工程的 pom.xml 中新增了 <code>&lt;parent&gt;</code> 标签记录其父工程。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro03-maven-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>另外，若子工程坐标中的 groupId 和 version 与其父工程相同，可省略。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- &lt;groupId&gt;com.yukiyama.maven&lt;/groupId&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro04-maven-module<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; --&gt;</span></span><br></pre></td></tr></table></figure>
<p>现在，在父工程 pom.xml 中使用 <code>&lt;dependencyManager&gt;</code> 标签统一管理其子工程的依赖版本，如下。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用dependencyManagement标签配置对依赖的管理 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 被管理的依赖并没有真正被引入到工程，需要在子工程中添加需要的依赖，只是无需写版本号 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>此时子工程不会自动依赖这些在父工程中依赖的包，而是按需在其自身的 pom.xml 中添加，但 <strong>不再需要维护版本信息，而是由父工程统一管理</strong> 。如在子工程 <code>pro04-maven-module</code> 的 pom.xml 中添加如下被版本管理的依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后在该 pom.xml 所在路径下执行 <code>mvn dependency:tree</code> 查看依赖信息。可以看到 <code>pro04-maven-module</code> 依赖了 spring-core  和 spring-beans，且版本号为父工程 pom 中指定的 4.0.0 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro04-maven-module % mvn dependency:tree</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ---------------&lt; com.yukiyama.maven:pro04-maven-module &gt;----------------</span><br><span class="line">[INFO] Building pro04-maven-module 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ pro04-maven-module ---</span><br><span class="line">[INFO] com.yukiyama.maven:pro04-maven-module:jar:1.0-SNAPSHOT</span><br><span class="line">[INFO] +- org.springframework:spring-core:jar:4.0.0.RELEASE:compile</span><br><span class="line">[INFO] |  \- commons-logging:commons-logging:jar:1.1.1:compile</span><br><span class="line">[INFO] +- org.springframework:spring-beans:jar:4.0.0.RELEASE:compile</span><br><span class="line">[INFO] \- junit:junit:jar:3.8.1:test</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  1.274 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T20:39:06+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro04-maven-module %</span><br></pre></td></tr></table></figure>
<p>当我们需要统一修改子工程中的依赖版本时，只需要在父工程中完成修改。例如在父工程的 pom.xml 中将前述 spring-core 和 spring-beans 的版本修改为 4.1.0 并保存后。再次查看 <code>pro04-maven-module</code> 的依赖信息，可以看到依赖的版本信息随之更新了。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro04-maven-module % mvn dependency:tree</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ---------------&lt; com.yukiyama.maven:pro04-maven-module &gt;----------------</span><br><span class="line">[INFO] Building pro04-maven-module 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/springframework/spring-core/4.1.0.RELEASE/spring-core-4.1.0.RELEASE.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ pro04-maven-module ---</span><br><span class="line">[INFO] com.yukiyama.maven:pro04-maven-module:jar:1.0-SNAPSHOT</span><br><span class="line">[INFO] +- org.springframework:spring-core:jar:4.1.0.RELEASE:compile</span><br><span class="line">[INFO] |  \- commons-logging:commons-logging:jar:1.1.3:compile</span><br><span class="line">[INFO] +- org.springframework:spring-beans:jar:4.1.0.RELEASE:compile</span><br><span class="line">[INFO] \- junit:junit:jar:3.8.1:test</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  28.726 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T20:43:20+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro04-maven-module %</span><br></pre></td></tr></table></figure>
<br />
<h4 id="自定义标签">自定义标签</h4>
<p>在 pom.xml 文件中，可在 <code>&lt;properties&gt;</code> 标签下设置 <strong>自定义标签</strong> 并引用。如下，将版本信息定义为 <code>&lt;yukiyama.spring.version&gt;</code> 标签，然后在需要用到的地方引用即可。统一引用之后，需要修改时只需要在自定义处修改，则引用该自定义标签的内容也都随之更新。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 自定标签，方便引用，并实现一处修改，处处修改 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">yukiyama.spring.version</span>&gt;</span>4.2.0.RELEASE<span class="tag">&lt;/<span class="name">yukiyama.spring.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用dependencyManagement标签配置对依赖的管理 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 被管理的依赖并没有真正被引入到工程，需要在子工程中添加需要的依赖，但无需写版本号 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;yukiyama.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;yukiyama.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;yukiyama.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-expression<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;yukiyama.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;yukiyama.spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>再次查看子工程的依赖信息，可以看到版本号更新为了自定义标签中指定的 4.2.0 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro04-maven-module % mvn dependency:tree</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ---------------&lt; com.yukiyama.maven:pro04-maven-module &gt;----------------</span><br><span class="line">[INFO] Building pro04-maven-module 1.0-SNAPSHOT</span><br><span class="line">[INFO] --------------------------------[ jar ]---------------------------------</span><br><span class="line">Downloading from nexus-aliyun: http://maven.aliyun.com/nexus/content/groups/public/org/springframework/spring-core/4.2.0.RELEASE/spring-core-4.2.0.RELEASE.pom</span><br><span class="line">...(略)...</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ pro04-maven-module ---</span><br><span class="line">[INFO] com.yukiyama.maven:pro04-maven-module:jar:1.0-SNAPSHOT</span><br><span class="line">[INFO] +- org.springframework:spring-core:jar:4.2.0.RELEASE:compile</span><br><span class="line">[INFO] |  \- commons-logging:commons-logging:jar:1.2:compile</span><br><span class="line">[INFO] +- org.springframework:spring-beans:jar:4.2.0.RELEASE:compile</span><br><span class="line">[INFO] \- junit:junit:jar:3.8.1:test</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  40.608 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T20:54:00+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro04-maven-module %</span><br></pre></td></tr></table></figure>
<br />
<h4 id="聚合">聚合</h4>
<p>聚合即在父工程或者说「总工程」下将各个子工程或者说「模块工程」汇聚起来。使得在总工程下可统一执行整体项目的构建。聚合配置的方式在「继承」中展示过，即在总工程的 pom.xml 下以 <code>&lt;modules&gt;</code> 标签汇聚子项目。下面展示如何通过汇聚，由总工程完成包括子工程在内的整体项目构建。</p>
<p>在 <code>pro04-maven-module</code> 的 pom.xml 中添加对 <code>pro05-maven-module</code> 的依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro05-maven-module<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在 <code>pro05-maven-module</code> 的 pom.xml 中添加对 <code>pro06-maven-module</code> 的依赖。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pro06-maven-module<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>然后在「总工程」 pom.xml 所在路径下执行 <code>mvn clean install</code> 命令，可以看到  install 的顺序是 pro03 &gt; pro06 &gt; pro05 &gt; pro04 。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">yukiyama@yukiyama pro03-maven-parent % mvn clean install</span><br><span class="line">[INFO] Scanning for projects...</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Build Order:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] pro03-maven-parent                                                 [pom]</span><br><span class="line">[INFO] pro06-maven-module                                                 [jar]</span><br><span class="line">[INFO] pro05-maven-module                                                 [jar]</span><br><span class="line">[INFO] pro04-maven-module                                                 [jar]</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] ---------------&lt; com.yukiyama.maven:pro03-maven-parent &gt;----------------</span><br><span class="line">[INFO] Building pro03-maven-parent 1.0-SNAPSHOT                           [1/4]</span><br><span class="line">[INFO] --------------------------------[ pom ]---------------------------------</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ pro03-maven-parent ---</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] --- maven-install-plugin:2.4:install (default-install) @ pro03-maven-parent ---</span><br><span class="line">[INFO] Installing /Users/yukiyama/maven/workspace/test/pro03-maven-parent/pom.xml to /Users/yukiyama/maven/repo/com/yukiyama/maven/pro03-maven-parent/1.0-SNAPSHOT/pro03-maven-parent-1.0-SNAPSHOT.pom</span><br><span class="line">...(略，依次安装 pro06, pro05 和 pro04)...</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Reactor Summary for pro03-maven-parent 1.0-SNAPSHOT:</span><br><span class="line">[INFO]</span><br><span class="line">[INFO] pro03-maven-parent ................................. SUCCESS [  0.443 s]</span><br><span class="line">[INFO] pro06-maven-module ................................. SUCCESS [  7.294 s]</span><br><span class="line">[INFO] pro05-maven-module ................................. SUCCESS [  0.628 s]</span><br><span class="line">[INFO] pro04-maven-module ................................. SUCCESS [  0.783 s]</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] BUILD SUCCESS</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">[INFO] Total time:  9.334 s</span><br><span class="line">[INFO] Finished at: 2022-09-24T21:16:59+08:00</span><br><span class="line">[INFO] ------------------------------------------------------------------------</span><br><span class="line">yukiyama@yukiyama pro03-maven-parent%</span><br></pre></td></tr></table></figure>
<p>安装后 <code>pro03-maven-parent</code> 下的目录结构如下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">pro03-maven-parent</span><br><span class="line">├── pom.xml</span><br><span class="line">├── pro04-maven-module</span><br><span class="line">│   ├── pom.xml</span><br><span class="line">│   ├── src</span><br><span class="line">│   │   ├── main</span><br><span class="line">│   │   │   └── java</span><br><span class="line">│   │   │       └── com</span><br><span class="line">│   │   │           └── yukiyama</span><br><span class="line">│   │   │               └── maven</span><br><span class="line">│   │   │                   └── App.java</span><br><span class="line">│   │   └── test</span><br><span class="line">│   │       └── java</span><br><span class="line">│   │           └── com</span><br><span class="line">│   │               └── yukiyama</span><br><span class="line">│   │                   └── maven</span><br><span class="line">│   │                       └── AppTest.java</span><br><span class="line">│   └── target</span><br><span class="line">│       ├── classes</span><br><span class="line">│       │   └── com</span><br><span class="line">│       │       └── yukiyama</span><br><span class="line">│       │           └── maven</span><br><span class="line">│       │               └── App.class</span><br><span class="line">│       ├── generated-sources</span><br><span class="line">│       │   └── annotations</span><br><span class="line">│       ├── generated-test-sources</span><br><span class="line">│       │   └── test-annotations</span><br><span class="line">│       ├── maven-archiver</span><br><span class="line">│       │   └── pom.properties</span><br><span class="line">│       ├── maven-status</span><br><span class="line">│       │   └── maven-compiler-plugin</span><br><span class="line">│       │       ├── compile</span><br><span class="line">│       │       │   └── default-compile</span><br><span class="line">│       │       │       ├── createdFiles.lst</span><br><span class="line">│       │       │       └── inputFiles.lst</span><br><span class="line">│       │       └── testCompile</span><br><span class="line">│       │           └── default-testCompile</span><br><span class="line">│       │               ├── createdFiles.lst</span><br><span class="line">│       │               └── inputFiles.lst</span><br><span class="line">│       ├── pro04-maven-module-1.0-SNAPSHOT.jar</span><br><span class="line">│       ├── surefire-reports</span><br><span class="line">│       │   ├── TEST-com.yukiyama.maven.AppTest.xml</span><br><span class="line">│       │   └── com.yukiyama.maven.AppTest.txt</span><br><span class="line">│       └── test-classes</span><br><span class="line">│           └── com</span><br><span class="line">│               └── yukiyama</span><br><span class="line">│                   └── maven</span><br><span class="line">│                       └── AppTest.class</span><br><span class="line">├── pro05-maven-module</span><br><span class="line">│   ├── pom.xml</span><br><span class="line">│   ├── src</span><br><span class="line">│   │   ├── main</span><br><span class="line">│   │   │   └── java</span><br><span class="line">│   │   │       └── com</span><br><span class="line">│   │   │           └── yukiyama</span><br><span class="line">│   │   │               └── maven</span><br><span class="line">│   │   │                   └── App.java</span><br><span class="line">│   │   └── test</span><br><span class="line">│   │       └── java</span><br><span class="line">│   │           └── com</span><br><span class="line">│   │               └── yukiyama</span><br><span class="line">│   │                   └── maven</span><br><span class="line">│   │                       └── AppTest.java</span><br><span class="line">│   └── target</span><br><span class="line">│       ├── classes</span><br><span class="line">│       │   └── com</span><br><span class="line">│       │       └── yukiyama</span><br><span class="line">│       │           └── maven</span><br><span class="line">│       │               └── App.class</span><br><span class="line">│       ├── generated-sources</span><br><span class="line">│       │   └── annotations</span><br><span class="line">│       ├── generated-test-sources</span><br><span class="line">│       │   └── test-annotations</span><br><span class="line">│       ├── maven-archiver</span><br><span class="line">│       │   └── pom.properties</span><br><span class="line">│       ├── maven-status</span><br><span class="line">│       │   └── maven-compiler-plugin</span><br><span class="line">│       │       ├── compile</span><br><span class="line">│       │       │   └── default-compile</span><br><span class="line">│       │       │       ├── createdFiles.lst</span><br><span class="line">│       │       │       └── inputFiles.lst</span><br><span class="line">│       │       └── testCompile</span><br><span class="line">│       │           └── default-testCompile</span><br><span class="line">│       │               ├── createdFiles.lst</span><br><span class="line">│       │               └── inputFiles.lst</span><br><span class="line">│       ├── pro05-maven-module-1.0-SNAPSHOT.jar</span><br><span class="line">│       ├── surefire-reports</span><br><span class="line">│       │   ├── TEST-com.yukiyama.maven.AppTest.xml</span><br><span class="line">│       │   └── com.yukiyama.maven.AppTest.txt</span><br><span class="line">│       └── test-classes</span><br><span class="line">│           └── com</span><br><span class="line">│               └── yukiyama</span><br><span class="line">│                   └── maven</span><br><span class="line">│                       └── AppTest.class</span><br><span class="line">├── pro06-maven-module</span><br><span class="line">│   ├── pom.xml</span><br><span class="line">│   ├── src</span><br><span class="line">│   │   ├── main</span><br><span class="line">│   │   │   └── java</span><br><span class="line">│   │   │       └── com</span><br><span class="line">│   │   │           └── yukiyama</span><br><span class="line">│   │   │               └── maven</span><br><span class="line">│   │   │                   └── App.java</span><br><span class="line">│   │   └── test</span><br><span class="line">│   │       └── java</span><br><span class="line">│   │           └── com</span><br><span class="line">│   │               └── yukiyama</span><br><span class="line">│   │                   └── maven</span><br><span class="line">│   │                       └── AppTest.java</span><br><span class="line">│   └── target</span><br><span class="line">│       ├── classes</span><br><span class="line">│       │   └── com</span><br><span class="line">│       │       └── yukiyama</span><br><span class="line">│       │           └── maven</span><br><span class="line">│       │               └── App.class</span><br><span class="line">│       ├── generated-sources</span><br><span class="line">│       │   └── annotations</span><br><span class="line">│       ├── generated-test-sources</span><br><span class="line">│       │   └── test-annotations</span><br><span class="line">│       ├── maven-archiver</span><br><span class="line">│       │   └── pom.properties</span><br><span class="line">│       ├── maven-status</span><br><span class="line">│       │   └── maven-compiler-plugin</span><br><span class="line">│       │       ├── compile</span><br><span class="line">│       │       │   └── default-compile</span><br><span class="line">│       │       │       ├── createdFiles.lst</span><br><span class="line">│       │       │       └── inputFiles.lst</span><br><span class="line">│       │       └── testCompile</span><br><span class="line">│       │           └── default-testCompile</span><br><span class="line">│       │               ├── createdFiles.lst</span><br><span class="line">│       │               └── inputFiles.lst</span><br><span class="line">│       ├── pro06-maven-module-1.0-SNAPSHOT.jar</span><br><span class="line">│       ├── surefire-reports</span><br><span class="line">│       │   ├── TEST-com.yukiyama.maven.AppTest.xml</span><br><span class="line">│       │   └── com.yukiyama.maven.AppTest.txt</span><br><span class="line">│       └── test-classes</span><br><span class="line">│           └── com</span><br><span class="line">│               └── yukiyama</span><br><span class="line">│                   └── maven</span><br><span class="line">│                       └── AppTest.class</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   └── java</span><br><span class="line">    │       └── com</span><br><span class="line">    │           └── yukiyama</span><br><span class="line">    │               └── maven</span><br><span class="line">    │                   └── App.java</span><br><span class="line">    └── test</span><br><span class="line">        └── java</span><br><span class="line">            └── com</span><br><span class="line">                └── yukiyama</span><br><span class="line">                    └── maven</span><br><span class="line">                        └── AppTest.java</span><br><span class="line"></span><br><span class="line">110 directories, 42 files</span><br></pre></td></tr></table></figure>
<p>工程间依赖时，要注意避免循环依赖，例如 pro03 &gt; pro04 &gt; pro05 &gt; pro06 &gt; pro04 。</p>
<br />
<h3 id="IDE方式-idea">IDE方式(idea)</h3>
<blockquote>
<p>使用 IntelliJ IDEA 2022.2.1 (Ultimate Edition) 演示。</p>
</blockquote>
<br />
<h4 id="设置">设置</h4>
<p>idea 本身已自带 maven ，但若想使用自己下载的 maven 版本，可以通过 File &gt; New Projects Setup &gt; Preferences for New Projects 菜单自定义 maven 相关信息，如下。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/idea-global-maven-setting.png" alt="idea-global-maven-setting"></p>
<br />
<h4 id="创建项目">创建项目</h4>
<h5 id="创建父项目">创建父项目</h5>
<p>接着 File &gt; Project ，选择 Maven Archetype，根据需要选择相应的 archetype ，设置坐标后完成创建。如下创建一个 Java 工程 (quickstart) ，工程名为 <code>maven_in_action</code> 。该工程将作为后续演示中三个 module 的父工程。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/new-maven-project.png" alt="image-20221001120248093"></p>
<p>创建后在 idea 中项目结构如下，与之前用命令行创建的 Java 项目类似。如不需要自动创建的 <code>App.java</code> 和 <code>AppTest.java</code> 文件，可删除。点击右侧的 maven 页签，可看到该页签集成了 maven 功能，十分方便操作。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/maven_project_created.png" alt="maven_project_created"></p>
<p>此时 <code>maven_in_action</code> 的打包方式为 <code>jar</code> ，可以手动修改为 <code>pom</code> 使其成为一个父工程，也可以直接在该工程下创建新的 module ，则 <code>maven_in_action</code> 会被 idea 自动修改为父工程。</p>
<br />
<h5 id="创建子Java工程">创建子Java工程</h5>
<p>通过 File &gt; New &gt; Module 菜单可创建子工程，如下，Archetype 选择 <code>quickstart</code>， 创建名为 <code>pro01-module-java</code> 的 java 子工程。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/new-module.png" alt="new-module"></p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/module-created.png" alt="module-created"></p>
<p>创建后，父工程 <code>maven_in_action</code> 的 <code>pom.xml</code> 文件被 idea 自动修改，多出 <code>&lt;modules&gt;</code> 标签，且 <code>&lt;packaging&gt;</code> 方式变为 <code>pom</code> 。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">module</span>&gt;</span>pro01-module-java<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>相比一般工程，子工程的 <code>pom.xml</code> 中具有 <code>&lt;parent&gt;</code> 标签，记录父工程的坐标信息。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven_in_action<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.yukiyama.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>为方便后续演示，接着再创建一个子 Java 工程 <code>pro02-module-java</code> ，过程略。</p>
<br />
<h5 id="创建子web工程">创建子web工程</h5>
<p>通过 File &gt; New &gt; Module 菜单可创建子工程，如下，Archetype 选择 <code>webapp</code>， 创建名为 <code>pro03-module-web</code> 的 web 子工程。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/new-module-web.png" alt="module-created"></p>
<p>如下，可以看到父工程的 <code>pom.xml</code> 的 <code>&lt;modules&gt;</code> 标签下记录了三个子工程的 artifactId (聚合)，<code>pro03-module-web</code> 子工程打包方式为 <code>war</code> ，且其 <code>&lt;parent&gt;</code> 标签记录了父工程的坐标信息。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/module-web-created.png" alt=""></p>
<p>如下是自动创建的 <code>web.xml</code> 文件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">web-app</span> <span class="keyword">PUBLIC</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN&quot;</span></span></span><br><span class="line"><span class="meta"> <span class="string">&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;</span> &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如下是自动创建的 <code>index.jsp</code> 文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如不需要自动创建的 <code>web.xml</code> 及 <code>index.jsp</code> 文件，可删除。删除 <code>web.xml</code> 后，可通过 File &gt; Project Structures &gt; Project Settings &gt; Modules，找到 web modules ，在右侧 Deployment Descriptors 中添加 <code>web.xml</code> ，填入正确路径 (<code>WEB-INF</code> 下)，选择所需版本。然后再添加 Web Resources Directories (即 <code>webapp</code>) 。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/add-webxml.png" alt=""></p>
<p>新建 <code>web.xml</code> 的路径要确保为工程目录下的 src/main/webapp/WEB-INF/web.xml 。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/deployment-descriptor-location.png" alt=""></p>
<p>Web Resource Directories 的路径要确保为工程目录下的 src/main/webapp 。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/web-resources-directories.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/finished-setting.png" alt=""></p>
<p>通过该方式新建的 <code>web.xml</code> 文件如下。可以看到使用该方式创建 <code>web.xml</code> 的优点时可以指定具体的版本，如下是 4.0 版本。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>
<br />
<h4 id="项目构建-3">项目构建</h4>
<p>在 idea 中，点击右侧 maven 页签打开maven操作界面，可以通过具体工程下的 Lifecycle 或者 Plugins ，对该工程执行具体的 maven 命令。</p>
<p>如下，双击 <code>pro01-module-java</code> 的 Lifecycle 下的 test ，相当于对该工程执行 <code>mvn test</code> 命令。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/idea-maven-test.png" alt=""></p>
<p>也可以在 Maven 视窗中点击命令行工具图标 (Execute maven goal) ，在弹出的 Run Anything 界面右上角选择要执行的项目对象，中输入组合命令 (例如 <code>mvn clean test</code> 等) 后回车即可执行。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/execute-maven-goal.png" alt=""></p>
<p>还可以选中 <code>pom.xml</code> ，右键 Open in &gt; Terminal 的方式，在 idea 中以命令行形式执行 maven 命令，该方式与在终端工具中输入具体命令的方式一样，只不过是在 idea 中而不是 terminal 中执行命令。</p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/open-in-terminal.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/maven_in_action/open-in-terminal-mvn-clean.png" alt=""></p>
<br />
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://iyukiyama.github.io">yukiyama</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://iyukiyama.github.io/maven-in-action/">https://iyukiyama.github.io/maven-in-action/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://iyukiyama.github.io" target="_blank">yukiyama</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Maven/">Maven</a></div><div class="post_share"><div class="social-share" data-image="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/maven-bg.png" data-sites="wechat,weibo,twitter,facebook,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/jdbc-in-action/"><img class="prev-cover" src="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/jdbc-bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">JDBC学习实战</div></div></a></div><div class="next-post pull-right"><a href="/concurrency-in-action/"><img class="next-cover" src="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/concurrency-bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Java并发编程学习实战</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">yukiyama</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">30</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/iyukiyama"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/iyukiyama" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.zhihu.com/people/yukiyamama" target="_blank" title="zhihu"><i class="fab fa-zhihu"></i></a><a class="social-icon" href="mailto:iyukiyama@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Maven学习实战_yukiyama</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven%E7%AE%80%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">Maven简述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%90%E6%A0%87"><span class="toc-number">1.1.1.</span> <span class="toc-text">坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POM"><span class="toc-number">1.1.2.</span> <span class="toc-text">POM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.3.</span> <span class="toc-text">目录结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-number">1.2.</span> <span class="toc-text">安装及配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Maven"><span class="toc-number">1.2.1.</span> <span class="toc-text">安装Maven</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Mac"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">Mac</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEMaven"><span class="toc-number">1.2.2.</span> <span class="toc-text">配置Maven</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%8F%8A%E7%AE%A1%E7%90%86%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.</span> <span class="toc-text">创建及管理项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.1.</span> <span class="toc-text">命令行方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAJava%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">创建Java项目</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA"><span class="toc-number">1.3.1.1.1.</span> <span class="toc-text">项目构建</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%96%E8%AF%91"><span class="toc-number">1.3.1.1.1.1.</span> <span class="toc-text">编译</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">1.3.1.1.1.2.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B8%85%E7%90%86"><span class="toc-number">1.3.1.1.1.3.</span> <span class="toc-text">清理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%93%E5%8C%85"><span class="toc-number">1.3.1.1.1.4.</span> <span class="toc-text">打包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%89%E8%A3%85"><span class="toc-number">1.3.1.1.1.5.</span> <span class="toc-text">安装</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAWeb%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">创建Web项目</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%86%E5%A4%87"><span class="toc-number">1.3.1.2.1.</span> <span class="toc-text">准备</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B0%E5%BB%BAJava%E6%96%87%E4%BB%B6"><span class="toc-number">1.3.1.2.1.1.</span> <span class="toc-text">新建Java文件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B3%A8%E5%86%8CServlet"><span class="toc-number">1.3.1.2.1.2.</span> <span class="toc-text">注册Servlet</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E8%B6%85%E9%93%BE%E6%8E%A5"><span class="toc-number">1.3.1.2.1.3.</span> <span class="toc-text">编写超链接</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA-2"><span class="toc-number">1.3.1.2.2.</span> <span class="toc-text">项目构建</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BC%96%E8%AF%91-2"><span class="toc-number">1.3.1.2.2.1.</span> <span class="toc-text">编译</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B8%85%E7%90%86-2"><span class="toc-number">1.3.1.2.2.2.</span> <span class="toc-text">清理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%93%E5%8C%85-2"><span class="toc-number">1.3.1.2.2.3.</span> <span class="toc-text">打包</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95-2"><span class="toc-number">1.3.1.2.2.4.</span> <span class="toc-text">测试</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%8D%E6%AC%A1%E6%89%93%E5%8C%85"><span class="toc-number">1.3.1.2.2.5.</span> <span class="toc-text">再次打包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E4%BE%9D%E8%B5%96"><span class="toc-number">1.3.1.3.1.</span> <span class="toc-text">查看依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E8%8C%83%E5%9B%B4"><span class="toc-number">1.3.1.3.2.</span> <span class="toc-text">依赖范围</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E4%BC%A0%E9%80%92"><span class="toc-number">1.3.1.3.3.</span> <span class="toc-text">依赖传递</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%8E%92%E9%99%A4"><span class="toc-number">1.3.1.3.4.</span> <span class="toc-text">依赖排除</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%A0%87%E7%AD%BE"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">自定义标签</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%81%9A%E5%90%88"><span class="toc-number">1.3.1.6.</span> <span class="toc-text">聚合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IDE%E6%96%B9%E5%BC%8F-idea"><span class="toc-number">1.3.2.</span> <span class="toc-text">IDE方式(idea)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.3.2.1.</span> <span class="toc-text">设置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.2.2.</span> <span class="toc-text">创建项目</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%88%B6%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.2.2.1.</span> <span class="toc-text">创建父项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90Java%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.3.2.2.2.</span> <span class="toc-text">创建子Java工程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%90web%E5%B7%A5%E7%A8%8B"><span class="toc-number">1.3.2.2.3.</span> <span class="toc-text">创建子web工程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA-3"><span class="toc-number">1.3.2.3.</span> <span class="toc-text">项目构建</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/intellij-idea/" title="IntelliJ Idea使用指南"><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/intellij-idea-bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="IntelliJ Idea使用指南"/></a><div class="content"><a class="title" href="/intellij-idea/" title="IntelliJ Idea使用指南">IntelliJ Idea使用指南</a><time datetime="2022-11-18T10:00:33.820Z" title="发表于 2022-11-18 18:00:33">2022-11-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/lombok-in-action/" title="Lombok学习实战"><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/lombok-bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Lombok学习实战"/></a><div class="content"><a class="title" href="/lombok-in-action/" title="Lombok学习实战">Lombok学习实战</a><time datetime="2022-11-17T14:23:56.080Z" title="发表于 2022-11-17 22:23:56">2022-11-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/docsify-in-action/" title="docsify使用指南"><img src="https://raw.githubusercontent.com/iyukiyama/pics/master/hexo-iyukiyama/site_img/posts/docsify-bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="docsify使用指南"/></a><div class="content"><a class="title" href="/docsify-in-action/" title="docsify使用指南">docsify使用指南</a><time datetime="2022-11-16T14:09:13.490Z" title="发表于 2022-11-16 22:09:13">2022-11-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2022 By yukiyama</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://iyukiyama.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo4hexo.vercel.app/',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo4hexo.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>